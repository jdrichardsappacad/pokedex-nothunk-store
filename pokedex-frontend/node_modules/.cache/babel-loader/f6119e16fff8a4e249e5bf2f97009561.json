{"ast":null,"code":"import { LOAD_ITEMS, REMOVE_ITEM, ADD_ITEM } from './items';\nconst LOAD = 'pokemon/LOAD';\nconst LOAD_TYPES = 'pokemon/LOAD_TYPES';\nconst ADD_ONE = 'pokemon/ADD_ONE';\n\nconst load = list => ({\n  type: LOAD,\n  list\n});\n\nconst loadTypes = types => ({\n  type: LOAD_TYPES,\n  types\n});\n\nconst addOnePokemon = pokemon => ({\n  type: ADD_ONE,\n  pokemon\n});\n\nexport const createPokemon = async (data, dispatch) => {\n  const response = await fetch(`/api/pokemon`, {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n\n  if (response.ok) {\n    const pokemon = await response.json();\n    dispatch(addOnePokemon(pokemon));\n    return pokemon;\n  }\n};\nexport const updatePokemon = async (data, dispatch) => {\n  const response = await fetch(`/api/pokemon/${data.id}`, {\n    method: 'put',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n\n  if (response.ok) {\n    const pokemon = await response.json();\n    dispatch(addOnePokemon(pokemon));\n    return pokemon;\n  }\n}; // export const getOnePokemon = (id) => async (dispatch) => {\n//   const response = await fetch(`/api/pokemon/${id}`);\n//   if (response.ok) {\n//     const pokemon = await response.json();\n//     dispatch(addOnePokemon(pokemon));\n//   }\n// };\n\nexport const getOnePokemon = async (id, dispatch) => {\n  const response = await fetch(`/api/pokemon/${id}`);\n\n  if (response.ok) {\n    const pokemon = await response.json();\n    dispatch(addOnePokemon(pokemon));\n  }\n}; // export const getPokemon = () => async dispatch => {\n//   const response = await fetch(`/api/pokemon`);\n//   if (response.ok) {\n//     const list = await response.json();\n//     dispatch(load(list));\n//   }\n// };\n\nexport const getPokemon = async dispatch => {\n  const response = await fetch(`/api/pokemon`);\n\n  if (response.ok) {\n    const list = await response.json();\n    dispatch(load(list));\n  }\n}; // export const getPokemonTypes = () => async (dispatch) => {\n//   const response = await fetch(`/api/pokemon/types`);\n//   if (response.ok) {\n//     const types = await response.json();\n//     dispatch(loadTypes(types));\n//   }\n// };\n\nexport const getPokemonTypes = async dispatch => {\n  const response = await fetch(`/api/pokemon/types`);\n\n  if (response.ok) {\n    const types = await response.json();\n    dispatch(loadTypes(types));\n  }\n};\nconst initialState = {\n  list: [],\n  types: []\n};\n\nconst sortList = list => {\n  return list.sort((pokemonA, pokemonB) => {\n    return pokemonA.no - pokemonB.no;\n  }).map(pokemon => pokemon.id);\n};\n\nconst pokemonReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD:\n      {\n        const allPokemon = {};\n        action.list.forEach(pokemon => {\n          allPokemon[pokemon.id] = pokemon;\n        });\n        return { ...allPokemon,\n          ...state,\n          list: sortList(action.list)\n        };\n      }\n\n    case LOAD_TYPES:\n      {\n        return { ...state,\n          types: action.types\n        };\n      }\n\n    case ADD_ONE:\n      {\n        if (!state[action.pokemon.id]) {\n          const newState = { ...state,\n            [action.pokemon.id]: action.pokemon\n          };\n          const pokemonList = newState.list.map(id => newState[id]);\n          pokemonList.push(action.pokemon);\n          newState.list = sortList(pokemonList);\n          return newState;\n        }\n\n        return { ...state,\n          [action.pokemon.id]: { ...state[action.pokemon.id],\n            ...action.pokemon\n          }\n        };\n      }\n\n    case LOAD_ITEMS:\n      {\n        return { ...state,\n          [action.pokemonId]: { ...state[action.pokemonId],\n            items: action.items.map(item => item.id)\n          }\n        };\n      }\n\n    case REMOVE_ITEM:\n      {\n        return { ...state,\n          [action.pokemonId]: { ...state[action.pokemonId],\n            items: state[action.pokemonId].filter(item => item.id !== action.itemId)\n          }\n        };\n      }\n\n    case ADD_ITEM:\n      {\n        console.log(action.item);\n        return { ...state,\n          [action.item.pokemonId]: { ...state[action.item.pokemonId],\n            items: [...state[action.item.pokemonId], action.item.id]\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default pokemonReducer;","map":{"version":3,"sources":["/Users/Devinci/Desktop/AppAcademy/Teach/04-November-Break/pokedex-project-nothunk-store/pokedex-frontend/src/store/pokemon.js"],"names":["LOAD_ITEMS","REMOVE_ITEM","ADD_ITEM","LOAD","LOAD_TYPES","ADD_ONE","load","list","type","loadTypes","types","addOnePokemon","pokemon","createPokemon","data","dispatch","response","fetch","method","headers","body","JSON","stringify","ok","json","updatePokemon","id","getOnePokemon","getPokemon","getPokemonTypes","initialState","sortList","sort","pokemonA","pokemonB","no","map","pokemonReducer","state","action","allPokemon","forEach","newState","pokemonList","push","pokemonId","items","item","filter","itemId","console","log"],"mappings":"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","sourcesContent":["import { LOAD_ITEMS, REMOVE_ITEM, ADD_ITEM } from './items';\n\nconst LOAD = 'pokemon/LOAD';\nconst LOAD_TYPES = 'pokemon/LOAD_TYPES';\nconst ADD_ONE = 'pokemon/ADD_ONE';\n\nconst load = (list) => ({\n  type: LOAD,\n  list\n});\n\nconst loadTypes = (types) => ({\n  type: LOAD_TYPES,\n  types\n});\n\nconst addOnePokemon = (pokemon) => ({\n  type: ADD_ONE,\n  pokemon\n});\n\nexport const createPokemon = async (data, dispatch) => {\n  const response = await fetch(`/api/pokemon`, {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n\n  if (response.ok) {\n    const pokemon = await response.json();\n    dispatch(addOnePokemon(pokemon));\n    return pokemon;\n  }\n};\n\nexport const updatePokemon = async (data, dispatch) => {\n  const response = await fetch(`/api/pokemon/${data.id}`, {\n    method: 'put',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n\n  if (response.ok) {\n    const pokemon = await response.json();\n    dispatch(addOnePokemon(pokemon));\n    return pokemon;\n  }\n};\n\n// export const getOnePokemon = (id) => async (dispatch) => {\n//   const response = await fetch(`/api/pokemon/${id}`);\n\n//   if (response.ok) {\n//     const pokemon = await response.json();\n//     dispatch(addOnePokemon(pokemon));\n//   }\n// };\n\nexport const getOnePokemon = async (id, dispatch) => {\n  const response = await fetch(`/api/pokemon/${id}`);\n\n  if (response.ok) {\n    const pokemon = await response.json();\n    dispatch(addOnePokemon(pokemon));\n  }\n};\n\n// export const getPokemon = () => async dispatch => {\n//   const response = await fetch(`/api/pokemon`);\n\n//   if (response.ok) {\n//     const list = await response.json();\n//     dispatch(load(list));\n//   }\n// };\n\nexport const getPokemon = async (dispatch) => {\n  const response = await fetch(`/api/pokemon`);\n\n  if (response.ok) {\n    const list = await response.json();\n    dispatch(load(list));\n  }\n};\n\n// export const getPokemonTypes = () => async (dispatch) => {\n//   const response = await fetch(`/api/pokemon/types`);\n\n//   if (response.ok) {\n//     const types = await response.json();\n//     dispatch(loadTypes(types));\n//   }\n// };\n\nexport const getPokemonTypes = async (dispatch) => {\n  const response = await fetch(`/api/pokemon/types`);\n\n  if (response.ok) {\n    const types = await response.json();\n    dispatch(loadTypes(types));\n  }\n};\n\nconst initialState = {\n  list: [],\n  types: []\n};\n\nconst sortList = (list) => {\n  return list\n    .sort((pokemonA, pokemonB) => {\n      return pokemonA.no - pokemonB.no;\n    })\n    .map((pokemon) => pokemon.id);\n};\n\nconst pokemonReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD: {\n      const allPokemon = {};\n      action.list.forEach((pokemon) => {\n        allPokemon[pokemon.id] = pokemon;\n      });\n      return {\n        ...allPokemon,\n        ...state,\n        list: sortList(action.list)\n      };\n    }\n    case LOAD_TYPES: {\n      return {\n        ...state,\n        types: action.types\n      };\n    }\n    case ADD_ONE: {\n      if (!state[action.pokemon.id]) {\n        const newState = {\n          ...state,\n          [action.pokemon.id]: action.pokemon\n        };\n        const pokemonList = newState.list.map((id) => newState[id]);\n        pokemonList.push(action.pokemon);\n        newState.list = sortList(pokemonList);\n        return newState;\n      }\n      return {\n        ...state,\n        [action.pokemon.id]: {\n          ...state[action.pokemon.id],\n          ...action.pokemon\n        }\n      };\n    }\n    case LOAD_ITEMS: {\n      return {\n        ...state,\n        [action.pokemonId]: {\n          ...state[action.pokemonId],\n          items: action.items.map((item) => item.id)\n        }\n      };\n    }\n    case REMOVE_ITEM: {\n      return {\n        ...state,\n        [action.pokemonId]: {\n          ...state[action.pokemonId],\n          items: state[action.pokemonId].filter(\n            (item) => item.id !== action.itemId\n          )\n        }\n      };\n    }\n    case ADD_ITEM: {\n      console.log(action.item);\n      return {\n        ...state,\n        [action.item.pokemonId]: {\n          ...state[action.item.pokemonId],\n          items: [...state[action.item.pokemonId], action.item.id]\n        }\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nexport default pokemonReducer;\n"]},"metadata":{},"sourceType":"module"}